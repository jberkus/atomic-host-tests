---
# vim: set ft=ansible:
#
- name: Set storage driver
  set_fact:
    storage_driver: 'overlay2'

- when: ansible_distribution == 'CentOSDev'
  name: Set storage driver for CAHC
  set_fact:
    storage_driver: 'devicemapper'

- name: Check Docker storage driver
  command: "docker info --format {% raw %}{{.Driver}}{% endraw %}"
  register: di
  failed_when: "di.stdout != storage_driver"

- name: Check for Docker mount
  command: findmnt /var/lib/docker/containers
